.. py:module:: shelve

shelve
======

Модуль `shelve` преобразует объект в последовательность байтов, которая может быть записана в файл, а потом прочитана из файла, сохраняет объекты в базе данных, своей структурой напоминающей словарь.


>>> import shelve
>>> db = shelve.open(“filename”)
>>> db[‘key’] = obj
>>> obj = db[‘key’]
>>> db.close()


.. py:method:: open(filename[, flag='c'][, protokol=None][, writeback=False])

    :param filename: файловый объект для хранения 
    :param protokol: протокол сохранения
    :param str flag: режим открытия файла (r - чтение, w - чтение и запись, с - чтение и запись (+ создание), n - чтение и запись (+ создание или перезапись))
    
    возвращает обект, БД, который похож на словарь и имеет следующие методы


    .. py:method:: clear()

        очищает БД


    .. py:method:: close()

        закрывает БД


    .. py:method:: get(key[, default=None])

        возвращает значение по ключу, если ключа нет, дефолтное значение


    .. py:method:: items()

        возвращает список кортежей, ключ и значение

        .. versionchanged:: 3.x

            возвращает объект итератор


    .. py:method:: keys()

        возвращает список ключей

        .. versionchanged:: 3.x

            возвращает объект итератор


    .. py:method:: pop(key[, default])

        Возвращает значение по ключу, удалив запись из БД. 

        * Если ключа нет, возвращается указанное дефолтное значение.
        * Если ключа нет и не указано дефолтное значение, возбуждается исключение `KeyError`


    .. py:method:: popitem()

        Возвращает случайную пару (ключ, значение) из БД, удаляя его из БД

        * Если БД пустая, возбуждается исключение `KeyError`


    .. py:method:: setdefault(<Ключ> [, <Значение по умолчанию>=None])    
        
        Возвращает значение по ключу, если такого ключа нет, то возвращается дефолтное значение, при этом добавив новую запись.
        

    .. py:method:: update(key=value)
    .. py:method:: update(dict)
    .. py:method:: update([(key, value)])
    .. py:method:: update(((key, value), ))

        Обновляет БД.


    .. py:method:: values()

        возвращает список со значениями

        .. versionchanged:: 3.x

            возвращает объект итератор